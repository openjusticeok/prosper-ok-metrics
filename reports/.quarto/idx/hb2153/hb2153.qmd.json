{"title":"HB 2153 Analysis","markdown":{"yaml":{"title":"HB 2153 Analysis","subtitle":"Open Justice Oklahoma","format":{"ojo-report-template-html":"default","pdf":{"pdf-engine":"xelatex"}},"author":"Brancen Gregory","date":"last-modified","logo":"www/ojo-logo-white.png","number-sections":true,"smooth-scroll":true,"title-block-banner":"black","title-block-banner-color":"white","knitr":{"opts_chunk":{"fig.align":"center","echo":false,"message":false,"warning":false}},"execute":{"freeze":"auto"},"description":"Estimating the number of Oklahomans with four or more simple possession convictions, 2001 through 2022. Analysis conducted at the request of [Oklahomans for Criminal Justice Reform (OCJR)](https://okjusticereform.org/) and [ProsperOK](https://www.prosperok.org/).\n","abstract":"We estimate that at least 2,945 Oklahomans have received 4 for more convictions for drug possession since 2001. This estimate is likely to underestimate the actual number of individuals in these circumstances due to the lack of data pre-2001 and other data availibility issues described below.\n"},"headingText":"Introduction","containsRefs":false,"markdown":"\n\n```{r, setup}\nlibrary(ojodb)\nlibrary(here)\nlibrary(readr)\nlibrary(stringr)\nlibrary(ggplot2)\nlibrary(gt)\nlibrary(lubridate)\nlibrary(tidyr)\nlibrary(purrr)\nlibrary(extrafont)\n\n#theme_set(theme_bw(base_family = \"Roboto\") %+replace% ojo_theme())\n\noscn_county_list <- c(\n  \"TULSA\",\n  \"OKLAHOMA\",\n  \"CLEVELAND\",\n  \"ROGERS\",\n  \"PAYNE\",\n  \"COMANCHE\",\n  \"GARFIELD\",\n  \"CANADIAN\",\n  \"LOGAN\",\n  \"ADAIR\",\n  \"PUSHMATAHA\",\n  \"ROGER MILLS\",\n  \"ELLIS\"\n)\n```\n\n\n\nOklahoma's 2023 legislative session saw the passage of HB 2153. This bill, rolling back provisions of State Question 780, makes possession of a controlled substance (excluding marijuana) a felony crime after the fourth such conviction in ten years. While the punishment for a misdemeanor possession conviction is up to \\$1,000 dollars and/or up to one year confinement, a felony conviction for the same crime can result in a fine of up to \\$5,000 dollars and/or up to 5 years imprisonment.\n\nThis analysis uses historical data on convictions for possession of a controlled substance to better understand how prevalent is the situation of having four or more convictions within 10 years. This estimate can inform expectations of impact upon implementation of HB 2153.\n\n## Data\n\n```{r, load_data}\n#| cache: true\n\n# ojodb <- ojo_connect()\n# \n# data <- ojo_tbl(\"case\", .con = ojodb) |>\n#   select(\n#     id,\n#     district,\n#     case_type,\n#     date_filed,\n#     date_closed,\n#     created_at,\n#     updated_at\n#   ) |>\n#   filter(\n#     case_type %in% c(\"CM\", \"CF\"),\n#     date_filed >= \"2001-01-01\",\n#     date_filed < \"2023-01-01\"\n#   ) |>\n#   left_join(\n#     ojo_tbl(\"count\", .con = ojodb),\n#     by = c(\"id\" = \"case_id\"),\n#     suffix = c(\"\", \"_count\")\n#   ) |>\n#   ojo_collect()\n# \n# write_csv(data, here(\"data/cm_cf_2001_2022.csv\"))\n\n# `data` is all CF / CM cases filed 2001-2022\ndata <- read_csv(here(\"data/cm_cf_2001_2022.csv\"))\n# `charge_predictions` is the uccs lookup table from all ~82,000 unique charge descriptions in the db\ncharge_predictions <- read_csv(here(\"data/toc-results/charge_predictions.csv\")) |>\n  distinct()\nuccs <- read_csv(here(\"data/toc-results/uccs-schema.csv\"))\n\ndata_oscn <- data |>\n  filter(district %in% oscn_county_list)\n\n```\n\n### Source\n\nOpen Justice Oklahoma maintains a database of administrative court records which includes information on all criminal misdemeanors and felonies filed in Oklahoma beginning in 2001. Case information is systematically collected from publicly available data hosted on the [Oklahoma State Court Network (OSCN)](https://www.oscn.net/v4/) website.\n\n* **Initial data pull: All CF / CM cases filed Jan 1 2001 - Dec 31, 2022, statewide**\n\n```{r, eval=FALSE, echo=TRUE}\n#| cache: true\n\ndata <- ojo_tbl(\"case\", .con = ojodb) |>\n  filter(\n    case_type %in% c(\"CM\", \"CF\"),\n    date_filed >= \"2001-01-01\",\n    date_filed < \"2023-01-01\"\n  ) |>\n  left_join(\n    ojo_tbl(\"count\", .con = ojodb),\n    by = c(\"id\" = \"case_id\"),\n    suffix = c(\"\", \"_count\")\n  ) |>\n  ojo_collect()\n```\n\nOur initial data pull has **`r nrow(data) |> format(big.mark = \",\")` rows**. Since only the 13 official OSCN counties report the charges in each case, we are limited to just those for this analysis of drug possession charges. **`r nrow(data_oscn) |> format(big.mark = \",\")` of the rows** were from these counties, and **`r data_oscn |> filter(!is.na(count_as_filed)) |> nrow() |> format(big.mark = \",\")` had non-missing values** for `count_as_filed`.\n\n* **Full list of OSCN counties:** `r paste(janitor::make_clean_names(oscn_county_list, \"title\"), collapse = \", \")`\n\n```{r}\nn_oscn_cases <- data |>\n  filter(district %in% oscn_county_list) |>\n  count(id) |>\n  nrow()\n\nn_total_cases <- data |>\n  count(id) |>\n  nrow()\n```\n\nIn the data, there were `r format(n_oscn_cases, big.mark = \",\")` unique **cases** filed in OSCN counties, compared to `r format(n_total_cases, big.mark = \",\")` cases filed statewide. Cases filed in the 13 OSCN counties therefore represent `r 100 * round(n_oscn_cases / n_total_cases, 4)`% of total cases. If we assume a similar disposition rate to these 13 counties in the other 64, we can then apply a multiplier of `r round(n_total_cases / n_oscn_cases, 2)` to extrapolate our result to a statewide estimate.\n\n* **Data availability, per county:**\n```{r}\ndata_oscn |>\n  group_by(district) |>\n  summarize(\n    n = n(),\n    n_format = format(n, big.mark = \",\"),\n    n_with_nonmissing_charge = sum(!is.na(count_as_filed)) |> format(big.mark = \",\"),\n    n_with_na_charge = sum(is.na(count_as_filed)),\n    percent_missing_charge = paste0((100 * n_with_na_charge / n) |> round(2) |> format(big.mark = \",\"), \"%\"),\n  ) |>\n  arrange(desc(n)) |>\n  select(-n, -n_with_na_charge) |>\n  rename(n_rows = \"n_format\") |>\n  janitor::clean_names(case = \"title\") |>\n  knitr::kable()\n```\n\n* **Data availability, per filing year**\n```{r}\ndata_oscn |>\n  group_by(year = paste0(year(floor_date(date_filed, \"3 years\")), \"-\", year(floor_date(date_filed, \"3 years\")) + 2)) |>\n  summarize(\n    n = n(),\n    n_format = format(n, big.mark = \",\"),\n    n_with_nonmissing_charge = sum(!is.na(count_as_filed)) |> format(big.mark = \",\"),\n    n_with_na_charge = sum(is.na(count_as_filed)),\n    percent_missing_charge = paste0((100 * n_with_na_charge / n) |> round(2) |> format(big.mark = \",\"), \"%\"),\n  ) |>\n  select(-n, -n_with_na_charge) |>\n  rename(n_rows = \"n_format\") |>\n  janitor::clean_names(case = \"title\") |>\n  knitr::kable()\n```\n\n\n```{r, clean_data}\nprepare <- function(x) {\n  x |>\n    str_to_upper() |>\n    str_remove_all(\"^[A-Z0-9]{0,10},\") |>\n    str_remove_all(\"(?i)IN VIOLATION.*\") |>\n    str_remove_all(r\"{\\s*\\([^\\)]+\\)}\") |>\n    str_replace_all(\"[[:punct:][:blank:]]+\", \" \") |>\n    str_squish()\n}\n\nresult_clean <- data |>\n  # Cleaning data to match w/ cleaned lookup table\n  mutate(\n    count_as_filed = prepare(count_as_filed),\n    # If count_as_disposed is missing, fill it with count_as_filed\n    # This will retain\n    count_as_disposed = if_else(\n      is.na(count_as_disposed),\n      count_as_filed,\n      prepare(count_as_disposed)\n    )\n  ) |>\n  # Filtering to only include OSCN counties\n  filter(district %in% oscn_county_list) |>\n  left_join(\n    charge_predictions,\n    by = c(\"count_as_disposed\" = \"charge\"),\n    suffix = c(\"\", \"_toc\"),\n    relationship = \"many-to-many\"\n  ) |>\n  left_join(uccs, by = \"uccs_code\")\n\n```\n\n### Methodology\n\nThis report analyzes data from 13 counties which report data on charges as filed and disposed, across all complete years of misdemeanor and felony data for charges of possession of a controlled substance. We then use a text classification tool to assist with finding all the simple drug possession charges in the data, which allows us to finally report the number of convictions on such charges per defendant.\n\nOur figures are likely to underestimate the total number of convictions by a relatively small, but still methodologically significant amount due to the expungement of records over time. The magnitude of this bias will be greater for earlier years, but can be roughly quantified by exploiting the court case id schema mandated by the Oklahoma Supreme Court.\n\n### Classifying Charge Descriptions\n\nWe use the (TOC tool)[https://cjars-toc.isr.umich.edu/] developed by researchers at the University of Michigan's Institute for Social Research to perform an initial classification of free-text charge descriptions into the Unified Crime Classification Standard (UCCS). The TOC tool provides estimates of the probability that each classification was correct. We set a threshold of 80% confidence, below which pattern matching techniques are used to further classify records for which the TOC tool has lower performance.\n\n```{r, probability-distribution}\nresult_clean |>\n  distinct(\n    count_as_disposed,\n    charge_desc,\n    uccs_code,\n    probability\n  ) |>\n  ggplot(aes(x = probability)) +\n    geom_histogram() +\n    # geom_vline(aes(xintercept = 0.8), color = ojo_pal[5], linetype = \"dashed\") +\n    # annotate(geom = \"label\", x = 0.8, y = 30000,\n    #          label = \"0.80 cutoff\", color = ojo_pal[5]) +\n  #scale_y_continuous(labels = scales::comma) +\n  labs(\n    title = \"Distribution of UCCS match probabilities\",\n    x = NULL,\n    y = NULL\n  )\n```\n\n```{r, filtered-data}\ndata_clean <- result_clean |>\n  select(\n    id,\n    case_type,\n    date_filed,\n    count_as_disposed,\n    disposition_date,\n    disposition,\n    charge_desc,\n    offense_category_desc,\n    offense_type_desc,\n    probability,\n    uccs_code,\n    party\n  ) |>\n  mutate(\n    poss = str_detect(count_as_disposed, \"(?i)poss|(?i)poass of cds|(?i)poissession\"), # added typos I found in `n`\n    dist = str_detect(count_as_disposed, \"(?i)\\\\bdist\"),\n    intent = str_detect(count_as_disposed, \"(?i)intent|\\\\bint\\\\b\"),\n    paraphernalia = str_detect(count_as_disposed, \"(?i)paraph.*\\\\b|(?i)\\\\bpara\\\\b|(?i)p.*nalia\"), # added typos \n    weapon = str_detect(count_as_disposed, \"(?i)weapon\"),\n    trafficking = str_detect(count_as_disposed, \"(?i)traffick\"),\n    endeavor = str_detect(count_as_disposed, \"(?i)endeavor|\\\\bend\\\\b\"),\n    wildlife = str_detect(count_as_disposed, \"(?i)wildlife\"),\n    manufacture = str_detect(count_as_disposed, \"(?i)\\\\bmanufac\"),\n    commercial = str_detect(count_as_disposed, \"(?i)COMM FAC\"),\n    school_park_church = str_detect(count_as_disposed, \"(?i)school|education|park|church|day care|\\\\spk\\\\s\"),\n    conspiracy = str_detect(count_as_disposed, \"(?i)\\\\bconsp\"),\n    maintaining = str_detect(count_as_disposed, \"(?i)\\\\bmaint.*(place|dwelling)\"),\n    tax = str_detect(count_as_disposed, \"(?i)\\\\btax\\\\b\"),\n    minor = str_detect(count_as_disposed, \"(?i)minor|child|under.*21\"),\n    inmate = str_detect(count_as_disposed, \"(?i)inmate|jail|contrab|penal|\\\\bfac\"),\n    theft = str_detect(count_as_disposed, \"(?i)larceny|theft|\\\\bstol(e|en)\\\\b\"),\n    vehicle = str_detect(count_as_disposed, \"(?i)(?<!\\\\snon|not\\\\s)(?:\\\\sMV\\\\b|motor vehicle)\"),\n    proceeds = str_detect(count_as_disposed, \"(?i)ac.*\\\\bp(r|o){0,2}|proceed\"),\n    drug = str_detect(count_as_disposed, \"CDS|C\\\\.D\\\\.S|DRUG|OXY|HUFF|AMPHET|ZOLOL|ZOLAM|HYDROC|CODEIN|PRECURS|XANAX|MORPH|METERDI|ZEPAM|LORAZ|VALIU|EPHED|SUB|COCA|PSEUDO| CS|CS | CD|CD |\\\\bPRESCRIP|\\\\bNARC|\\\\bMETH|\\\\bC\\\\.D\\\\.|HEROIN|ANHYD|AMMONIA|OPIUM|LORTAB|\\\\bPARAPH\\\\b|\\\\bMA.*NA\\\\b|\\\\bMJ\\\\b|\\\\bMARI\\\\b\"),\n    uccs_drug = probability >= 0.8 & uccs_code >= 3090 & uccs_code <= 3162,\n    uccs_drug_plus = probability >= 0.8 & uccs_code >= 3090 & uccs_code <= 3230\n  ) |>\n  arrange(count_as_disposed)\n\n# `d` is all charges that fit our criteria  \nd <- data_clean |> \n  filter(\n    (uccs_drug_plus & !intent & !proceeds & !maintaining & !conspiracy & !school_park_church) |\n      (poss & drug & !dist & !intent & !paraphernalia & !weapon & !trafficking &\n         !endeavor & !wildlife & !manufacture & !commercial & !school_park_church &\n         !conspiracy & !maintaining & !minor & !inmate & !vehicle & !proceeds)\n  )\n\nmost_common_included <- d |>\n  select(count_as_disposed, probability, charge_desc, uccs_code,\n         poss, dist, intent, paraphernalia, weapon, trafficking, endeavor,\n         wildlife, manufacture, commercial, school_park_church, conspiracy,\n         maintaining, tax, minor, inmate, theft, vehicle, proceeds, drug) |>\n  group_by(count_as_disposed) |>\n  mutate(n = n()) |>\n  unique() |>\n  arrange(desc(n))\n\n# `n` is all charges that did not fit our criteria;\n# should not have any simple possession charges\nn <- data_clean |>\n  filter(!count_as_disposed %in% d$count_as_disposed,\n         !is.na(count_as_disposed),\n         count_as_disposed != \"\") |>\n  select(count_as_disposed, probability, charge_desc, uccs_code,\n         poss, dist, intent, paraphernalia, weapon, trafficking, endeavor,\n         wildlife, manufacture, commercial, school_park_church, conspiracy,\n         maintaining, tax, minor, inmate, theft, vehicle, proceeds, drug)\n\nmost_common_excluded <- n |>\n  group_by(count_as_disposed) |>\n  mutate(n = n()) |>\n  unique() |>\n  arrange(desc(n))\n\n```\n\nThe 20 most common verbatim count descriptions -- looking only at charges that were **included** -- are shown below:\n\n```{r}\nmost_common_included |>\n  ungroup() |>\n  select(count_as_disposed, n) |>\n  slice_max(order_by = n,\n            n = 20) |>\n  gt::gt()\n  #knitr::kable(format.args = list(big.mark = \",\"))\n\n```\n\nThe 20 most common verbatim count descriptions -- looking only at charges that were **excluded** -- are shown below:\n\n```{r}\nmost_common_excluded |>\n  ungroup() |>\n  select(count_as_disposed, n) |>\n  slice_max(order_by = n,\n            n = 20) |>\n  gt::gt()\n  # knitr::kable(format.args = list(big.mark = \",\"))\n\n```\n\nFinally, we add information on the defendants in each casein order to determine how many have 4 or more simple possession charges.\n\n```{r, parties-data}\n#| cache: true\n\nojodb <- ojo_connect()\n\nparties <- d |>\n  left_join(\n    ojo_tbl(\"party\", .con = ojodb) |>\n      filter(\n        role == \"Defendant\",\n        case_id %in% !!d$id\n      ) |>\n      distinct() |>\n      ojo_collect(),\n    by = c(\"party\" = \"id\")\n  )\n```\n\nOf the **`r nrow(parties) |> format(big.mark = \",\")` total rows / charges** in the data, **`r parties |> filter(!is.na(oscn_id)) |> nrow() |> format(big.mark = \",\")`** have an associated person record (**`r (100 * parties |> filter(!is.na(oscn_id)) |> nrow() / nrow(parties)) |> round(2)`%**). Records without this unique identifier assigned by the court system are excluded from further analysis.\n\n## Results\n\n### Distribution of Simple Possession Charges\n\nExcluding indisposed cases, we count how many simple possession charges each individual has from 2001 through 2022.\n\n```{r, conviction-count-plot}\nparties_clean <- parties |>\n  drop_na(disposition, oscn_id) |> # added `oscn_id` to this, because ~2-3% are missing\n  filter(str_detect(disposition, \"(?i)dismiss|defer|convic\")) |>\n  # Moved this up here so it can included in the summarize()\n  mutate(\n    marijuana = str_detect(\n      count_as_disposed,\n      regex(\"\\\\bMA.*NA\\\\b|\\\\bMJ\\\\b|\\\\bMARI|marijuan|\\\\bMARJ|\\\\bMARIJ\\\\b|\\\\bTHC\\\\b|\\\\bHASHISH\\\\b\", ignore_case = T)\n    ),\n    # other = str_detect(\n    #   count_as_disposed,\n    #   \"(?i)OXY|HUFF|AMPHET|ZOLOL|ZOLAM|HYDROC|CODEIN|PRECURS|XANAX|MORPH|METERDI|ZEPAM|LORAZ|VALIU|EPHED|COCA|PSEUDO|\\\\bPRESCRIP|\\\\bNARC|\\\\bMETH|HEROIN|ANHYD|AMMONIA|OPIUM|LORTAB|\\\\bPARAPH\\\\b|\\\\bOTHER\\\\b\"\n    # )\n  )\n\nparties_sum <- parties_clean |>\n  group_by(oscn_id) |>\n  summarize(\n    n = n(),\n    n_capped = if_else(n >= 4, \"4+\", as.character(n)),\n    list_charges = paste0(count_as_disposed, collapse = \"; \")\n  ) |>\n  ungroup()\n\nparties_sum |>\n  filter(n >= 2) |>\n  ggplot(aes(\n    x = n_capped\n  )) +\n  scale_y_continuous(labels = scales::comma) +\n  stat_count() +\n  geom_text(aes(label = format(after_stat(count), big.mark = \",\")), stat = \"count\", vjust = -0.2) +\n  labs(title = \"Simple possession charges per defendant\",\n       subtitle = \"All CF / CM simple possession charges\\nfiled 2001-2022\",\n       x = \"N simple possession charges in data\",\n       y = \"Total defendants\",\n       caption = \"This data is based on the total number\\nof charges in our dataset, not cases\")\n\n```\n\nNext, we repeat this same analysis excluding descriptions mentioning marijuana, as HB 2153 provides an exception for these charges.\n\n```{r}\nparties_sum_no_marijuana <- parties_clean |>\n  filter(!marijuana) |>\n  group_by(oscn_id) |>\n  summarize(\n    n = n(),\n    n_capped = if_else(n >= 4, \"4+\", as.character(n)),\n    list_charges = paste0(count_as_disposed, collapse = \"; \")\n  ) |>\n  ungroup()\n\nparties_sum_no_marijuana |>\n  filter(n >= 2) |>\n  ggplot(aes(\n    x = n_capped, \n  )) +\n  scale_y_continuous(labels = scales::comma) +\n  stat_count() +\n  geom_text(aes(label = format(after_stat(count), big.mark = \",\")), stat = \"count\", vjust = -0.2) +\n  labs(title = \"Non-marijuana simple possession charges\\nper defendant\",\n       subtitle = \"Non-marijuana CF / CM simple possession charges\\nfiled 2001-2022\",\n       x = \"N non-marijuana possession charges in data\",\n       y = \"Total defendants\",\n       caption = \"This data is based on the total number\\nof charges in our dataset, not cases\")\n```\n\n```{r}\npoi <- parties_clean |>\n  filter(!marijuana) |>\n  arrange(oscn_id, disposition_date) |>\n  group_by(oscn_id) |>\n  nest() |>\n  mutate(\n    rolling_10_year_4_filings = map_lgl(\n      data,\n      ~ {\n        date_sequence <- .x$date_filed\n        any(sapply(date_sequence, function(d) {\n          sum(between(date_sequence, d, d + years(10))) >= 4\n        }))\n      }\n    )\n  ) |>\n  filter(rolling_10_year_4_filings) |>\n  unnest(cols = data) |>\n  ungroup()\n```\n\n```{r}\nn_oscn_poi <- poi |>\n  distinct(oscn_id) |>\n  count() |>\n  pull()\n\nn_total_poi <- n_oscn_poi * (n_total_cases / n_oscn_cases)\n```\n\nFinally, HB 2153 stipulates that the felony charge only comes into effect on the fourth or higher simple possession **conviction** within a **ten year time-span**. We therefore limit our count of charges to only those within a rolling 10 year window, arriving at our final result for OSCN counties. Applying the multiplier derived above, we then find an estimate for the number of individuals who, since 2001, have been convicted with simple drug possession four or more times. \n\n```{r}\ntibble(\n  OSCN = n_oscn_poi,\n  Statewide = floor(n_total_poi) \n) |>\n  gt() |>\n  gt::fmt_number(\n    decimals = 0\n  ) |>\n  gt::tab_footnote(\n    footnote = \"Estimated using the disposition rate of OSCN county cases\",\n    locations = cells_column_labels(\n      columns = Statewide\n    )\n  )\n```\n\n","srcMarkdownNoYaml":"\n\n```{r, setup}\nlibrary(ojodb)\nlibrary(here)\nlibrary(readr)\nlibrary(stringr)\nlibrary(ggplot2)\nlibrary(gt)\nlibrary(lubridate)\nlibrary(tidyr)\nlibrary(purrr)\nlibrary(extrafont)\n\n#theme_set(theme_bw(base_family = \"Roboto\") %+replace% ojo_theme())\n\noscn_county_list <- c(\n  \"TULSA\",\n  \"OKLAHOMA\",\n  \"CLEVELAND\",\n  \"ROGERS\",\n  \"PAYNE\",\n  \"COMANCHE\",\n  \"GARFIELD\",\n  \"CANADIAN\",\n  \"LOGAN\",\n  \"ADAIR\",\n  \"PUSHMATAHA\",\n  \"ROGER MILLS\",\n  \"ELLIS\"\n)\n```\n\n\n## Introduction\n\nOklahoma's 2023 legislative session saw the passage of HB 2153. This bill, rolling back provisions of State Question 780, makes possession of a controlled substance (excluding marijuana) a felony crime after the fourth such conviction in ten years. While the punishment for a misdemeanor possession conviction is up to \\$1,000 dollars and/or up to one year confinement, a felony conviction for the same crime can result in a fine of up to \\$5,000 dollars and/or up to 5 years imprisonment.\n\nThis analysis uses historical data on convictions for possession of a controlled substance to better understand how prevalent is the situation of having four or more convictions within 10 years. This estimate can inform expectations of impact upon implementation of HB 2153.\n\n## Data\n\n```{r, load_data}\n#| cache: true\n\n# ojodb <- ojo_connect()\n# \n# data <- ojo_tbl(\"case\", .con = ojodb) |>\n#   select(\n#     id,\n#     district,\n#     case_type,\n#     date_filed,\n#     date_closed,\n#     created_at,\n#     updated_at\n#   ) |>\n#   filter(\n#     case_type %in% c(\"CM\", \"CF\"),\n#     date_filed >= \"2001-01-01\",\n#     date_filed < \"2023-01-01\"\n#   ) |>\n#   left_join(\n#     ojo_tbl(\"count\", .con = ojodb),\n#     by = c(\"id\" = \"case_id\"),\n#     suffix = c(\"\", \"_count\")\n#   ) |>\n#   ojo_collect()\n# \n# write_csv(data, here(\"data/cm_cf_2001_2022.csv\"))\n\n# `data` is all CF / CM cases filed 2001-2022\ndata <- read_csv(here(\"data/cm_cf_2001_2022.csv\"))\n# `charge_predictions` is the uccs lookup table from all ~82,000 unique charge descriptions in the db\ncharge_predictions <- read_csv(here(\"data/toc-results/charge_predictions.csv\")) |>\n  distinct()\nuccs <- read_csv(here(\"data/toc-results/uccs-schema.csv\"))\n\ndata_oscn <- data |>\n  filter(district %in% oscn_county_list)\n\n```\n\n### Source\n\nOpen Justice Oklahoma maintains a database of administrative court records which includes information on all criminal misdemeanors and felonies filed in Oklahoma beginning in 2001. Case information is systematically collected from publicly available data hosted on the [Oklahoma State Court Network (OSCN)](https://www.oscn.net/v4/) website.\n\n* **Initial data pull: All CF / CM cases filed Jan 1 2001 - Dec 31, 2022, statewide**\n\n```{r, eval=FALSE, echo=TRUE}\n#| cache: true\n\ndata <- ojo_tbl(\"case\", .con = ojodb) |>\n  filter(\n    case_type %in% c(\"CM\", \"CF\"),\n    date_filed >= \"2001-01-01\",\n    date_filed < \"2023-01-01\"\n  ) |>\n  left_join(\n    ojo_tbl(\"count\", .con = ojodb),\n    by = c(\"id\" = \"case_id\"),\n    suffix = c(\"\", \"_count\")\n  ) |>\n  ojo_collect()\n```\n\nOur initial data pull has **`r nrow(data) |> format(big.mark = \",\")` rows**. Since only the 13 official OSCN counties report the charges in each case, we are limited to just those for this analysis of drug possession charges. **`r nrow(data_oscn) |> format(big.mark = \",\")` of the rows** were from these counties, and **`r data_oscn |> filter(!is.na(count_as_filed)) |> nrow() |> format(big.mark = \",\")` had non-missing values** for `count_as_filed`.\n\n* **Full list of OSCN counties:** `r paste(janitor::make_clean_names(oscn_county_list, \"title\"), collapse = \", \")`\n\n```{r}\nn_oscn_cases <- data |>\n  filter(district %in% oscn_county_list) |>\n  count(id) |>\n  nrow()\n\nn_total_cases <- data |>\n  count(id) |>\n  nrow()\n```\n\nIn the data, there were `r format(n_oscn_cases, big.mark = \",\")` unique **cases** filed in OSCN counties, compared to `r format(n_total_cases, big.mark = \",\")` cases filed statewide. Cases filed in the 13 OSCN counties therefore represent `r 100 * round(n_oscn_cases / n_total_cases, 4)`% of total cases. If we assume a similar disposition rate to these 13 counties in the other 64, we can then apply a multiplier of `r round(n_total_cases / n_oscn_cases, 2)` to extrapolate our result to a statewide estimate.\n\n* **Data availability, per county:**\n```{r}\ndata_oscn |>\n  group_by(district) |>\n  summarize(\n    n = n(),\n    n_format = format(n, big.mark = \",\"),\n    n_with_nonmissing_charge = sum(!is.na(count_as_filed)) |> format(big.mark = \",\"),\n    n_with_na_charge = sum(is.na(count_as_filed)),\n    percent_missing_charge = paste0((100 * n_with_na_charge / n) |> round(2) |> format(big.mark = \",\"), \"%\"),\n  ) |>\n  arrange(desc(n)) |>\n  select(-n, -n_with_na_charge) |>\n  rename(n_rows = \"n_format\") |>\n  janitor::clean_names(case = \"title\") |>\n  knitr::kable()\n```\n\n* **Data availability, per filing year**\n```{r}\ndata_oscn |>\n  group_by(year = paste0(year(floor_date(date_filed, \"3 years\")), \"-\", year(floor_date(date_filed, \"3 years\")) + 2)) |>\n  summarize(\n    n = n(),\n    n_format = format(n, big.mark = \",\"),\n    n_with_nonmissing_charge = sum(!is.na(count_as_filed)) |> format(big.mark = \",\"),\n    n_with_na_charge = sum(is.na(count_as_filed)),\n    percent_missing_charge = paste0((100 * n_with_na_charge / n) |> round(2) |> format(big.mark = \",\"), \"%\"),\n  ) |>\n  select(-n, -n_with_na_charge) |>\n  rename(n_rows = \"n_format\") |>\n  janitor::clean_names(case = \"title\") |>\n  knitr::kable()\n```\n\n\n```{r, clean_data}\nprepare <- function(x) {\n  x |>\n    str_to_upper() |>\n    str_remove_all(\"^[A-Z0-9]{0,10},\") |>\n    str_remove_all(\"(?i)IN VIOLATION.*\") |>\n    str_remove_all(r\"{\\s*\\([^\\)]+\\)}\") |>\n    str_replace_all(\"[[:punct:][:blank:]]+\", \" \") |>\n    str_squish()\n}\n\nresult_clean <- data |>\n  # Cleaning data to match w/ cleaned lookup table\n  mutate(\n    count_as_filed = prepare(count_as_filed),\n    # If count_as_disposed is missing, fill it with count_as_filed\n    # This will retain\n    count_as_disposed = if_else(\n      is.na(count_as_disposed),\n      count_as_filed,\n      prepare(count_as_disposed)\n    )\n  ) |>\n  # Filtering to only include OSCN counties\n  filter(district %in% oscn_county_list) |>\n  left_join(\n    charge_predictions,\n    by = c(\"count_as_disposed\" = \"charge\"),\n    suffix = c(\"\", \"_toc\"),\n    relationship = \"many-to-many\"\n  ) |>\n  left_join(uccs, by = \"uccs_code\")\n\n```\n\n### Methodology\n\nThis report analyzes data from 13 counties which report data on charges as filed and disposed, across all complete years of misdemeanor and felony data for charges of possession of a controlled substance. We then use a text classification tool to assist with finding all the simple drug possession charges in the data, which allows us to finally report the number of convictions on such charges per defendant.\n\nOur figures are likely to underestimate the total number of convictions by a relatively small, but still methodologically significant amount due to the expungement of records over time. The magnitude of this bias will be greater for earlier years, but can be roughly quantified by exploiting the court case id schema mandated by the Oklahoma Supreme Court.\n\n### Classifying Charge Descriptions\n\nWe use the (TOC tool)[https://cjars-toc.isr.umich.edu/] developed by researchers at the University of Michigan's Institute for Social Research to perform an initial classification of free-text charge descriptions into the Unified Crime Classification Standard (UCCS). The TOC tool provides estimates of the probability that each classification was correct. We set a threshold of 80% confidence, below which pattern matching techniques are used to further classify records for which the TOC tool has lower performance.\n\n```{r, probability-distribution}\nresult_clean |>\n  distinct(\n    count_as_disposed,\n    charge_desc,\n    uccs_code,\n    probability\n  ) |>\n  ggplot(aes(x = probability)) +\n    geom_histogram() +\n    # geom_vline(aes(xintercept = 0.8), color = ojo_pal[5], linetype = \"dashed\") +\n    # annotate(geom = \"label\", x = 0.8, y = 30000,\n    #          label = \"0.80 cutoff\", color = ojo_pal[5]) +\n  #scale_y_continuous(labels = scales::comma) +\n  labs(\n    title = \"Distribution of UCCS match probabilities\",\n    x = NULL,\n    y = NULL\n  )\n```\n\n```{r, filtered-data}\ndata_clean <- result_clean |>\n  select(\n    id,\n    case_type,\n    date_filed,\n    count_as_disposed,\n    disposition_date,\n    disposition,\n    charge_desc,\n    offense_category_desc,\n    offense_type_desc,\n    probability,\n    uccs_code,\n    party\n  ) |>\n  mutate(\n    poss = str_detect(count_as_disposed, \"(?i)poss|(?i)poass of cds|(?i)poissession\"), # added typos I found in `n`\n    dist = str_detect(count_as_disposed, \"(?i)\\\\bdist\"),\n    intent = str_detect(count_as_disposed, \"(?i)intent|\\\\bint\\\\b\"),\n    paraphernalia = str_detect(count_as_disposed, \"(?i)paraph.*\\\\b|(?i)\\\\bpara\\\\b|(?i)p.*nalia\"), # added typos \n    weapon = str_detect(count_as_disposed, \"(?i)weapon\"),\n    trafficking = str_detect(count_as_disposed, \"(?i)traffick\"),\n    endeavor = str_detect(count_as_disposed, \"(?i)endeavor|\\\\bend\\\\b\"),\n    wildlife = str_detect(count_as_disposed, \"(?i)wildlife\"),\n    manufacture = str_detect(count_as_disposed, \"(?i)\\\\bmanufac\"),\n    commercial = str_detect(count_as_disposed, \"(?i)COMM FAC\"),\n    school_park_church = str_detect(count_as_disposed, \"(?i)school|education|park|church|day care|\\\\spk\\\\s\"),\n    conspiracy = str_detect(count_as_disposed, \"(?i)\\\\bconsp\"),\n    maintaining = str_detect(count_as_disposed, \"(?i)\\\\bmaint.*(place|dwelling)\"),\n    tax = str_detect(count_as_disposed, \"(?i)\\\\btax\\\\b\"),\n    minor = str_detect(count_as_disposed, \"(?i)minor|child|under.*21\"),\n    inmate = str_detect(count_as_disposed, \"(?i)inmate|jail|contrab|penal|\\\\bfac\"),\n    theft = str_detect(count_as_disposed, \"(?i)larceny|theft|\\\\bstol(e|en)\\\\b\"),\n    vehicle = str_detect(count_as_disposed, \"(?i)(?<!\\\\snon|not\\\\s)(?:\\\\sMV\\\\b|motor vehicle)\"),\n    proceeds = str_detect(count_as_disposed, \"(?i)ac.*\\\\bp(r|o){0,2}|proceed\"),\n    drug = str_detect(count_as_disposed, \"CDS|C\\\\.D\\\\.S|DRUG|OXY|HUFF|AMPHET|ZOLOL|ZOLAM|HYDROC|CODEIN|PRECURS|XANAX|MORPH|METERDI|ZEPAM|LORAZ|VALIU|EPHED|SUB|COCA|PSEUDO| CS|CS | CD|CD |\\\\bPRESCRIP|\\\\bNARC|\\\\bMETH|\\\\bC\\\\.D\\\\.|HEROIN|ANHYD|AMMONIA|OPIUM|LORTAB|\\\\bPARAPH\\\\b|\\\\bMA.*NA\\\\b|\\\\bMJ\\\\b|\\\\bMARI\\\\b\"),\n    uccs_drug = probability >= 0.8 & uccs_code >= 3090 & uccs_code <= 3162,\n    uccs_drug_plus = probability >= 0.8 & uccs_code >= 3090 & uccs_code <= 3230\n  ) |>\n  arrange(count_as_disposed)\n\n# `d` is all charges that fit our criteria  \nd <- data_clean |> \n  filter(\n    (uccs_drug_plus & !intent & !proceeds & !maintaining & !conspiracy & !school_park_church) |\n      (poss & drug & !dist & !intent & !paraphernalia & !weapon & !trafficking &\n         !endeavor & !wildlife & !manufacture & !commercial & !school_park_church &\n         !conspiracy & !maintaining & !minor & !inmate & !vehicle & !proceeds)\n  )\n\nmost_common_included <- d |>\n  select(count_as_disposed, probability, charge_desc, uccs_code,\n         poss, dist, intent, paraphernalia, weapon, trafficking, endeavor,\n         wildlife, manufacture, commercial, school_park_church, conspiracy,\n         maintaining, tax, minor, inmate, theft, vehicle, proceeds, drug) |>\n  group_by(count_as_disposed) |>\n  mutate(n = n()) |>\n  unique() |>\n  arrange(desc(n))\n\n# `n` is all charges that did not fit our criteria;\n# should not have any simple possession charges\nn <- data_clean |>\n  filter(!count_as_disposed %in% d$count_as_disposed,\n         !is.na(count_as_disposed),\n         count_as_disposed != \"\") |>\n  select(count_as_disposed, probability, charge_desc, uccs_code,\n         poss, dist, intent, paraphernalia, weapon, trafficking, endeavor,\n         wildlife, manufacture, commercial, school_park_church, conspiracy,\n         maintaining, tax, minor, inmate, theft, vehicle, proceeds, drug)\n\nmost_common_excluded <- n |>\n  group_by(count_as_disposed) |>\n  mutate(n = n()) |>\n  unique() |>\n  arrange(desc(n))\n\n```\n\nThe 20 most common verbatim count descriptions -- looking only at charges that were **included** -- are shown below:\n\n```{r}\nmost_common_included |>\n  ungroup() |>\n  select(count_as_disposed, n) |>\n  slice_max(order_by = n,\n            n = 20) |>\n  gt::gt()\n  #knitr::kable(format.args = list(big.mark = \",\"))\n\n```\n\nThe 20 most common verbatim count descriptions -- looking only at charges that were **excluded** -- are shown below:\n\n```{r}\nmost_common_excluded |>\n  ungroup() |>\n  select(count_as_disposed, n) |>\n  slice_max(order_by = n,\n            n = 20) |>\n  gt::gt()\n  # knitr::kable(format.args = list(big.mark = \",\"))\n\n```\n\nFinally, we add information on the defendants in each casein order to determine how many have 4 or more simple possession charges.\n\n```{r, parties-data}\n#| cache: true\n\nojodb <- ojo_connect()\n\nparties <- d |>\n  left_join(\n    ojo_tbl(\"party\", .con = ojodb) |>\n      filter(\n        role == \"Defendant\",\n        case_id %in% !!d$id\n      ) |>\n      distinct() |>\n      ojo_collect(),\n    by = c(\"party\" = \"id\")\n  )\n```\n\nOf the **`r nrow(parties) |> format(big.mark = \",\")` total rows / charges** in the data, **`r parties |> filter(!is.na(oscn_id)) |> nrow() |> format(big.mark = \",\")`** have an associated person record (**`r (100 * parties |> filter(!is.na(oscn_id)) |> nrow() / nrow(parties)) |> round(2)`%**). Records without this unique identifier assigned by the court system are excluded from further analysis.\n\n## Results\n\n### Distribution of Simple Possession Charges\n\nExcluding indisposed cases, we count how many simple possession charges each individual has from 2001 through 2022.\n\n```{r, conviction-count-plot}\nparties_clean <- parties |>\n  drop_na(disposition, oscn_id) |> # added `oscn_id` to this, because ~2-3% are missing\n  filter(str_detect(disposition, \"(?i)dismiss|defer|convic\")) |>\n  # Moved this up here so it can included in the summarize()\n  mutate(\n    marijuana = str_detect(\n      count_as_disposed,\n      regex(\"\\\\bMA.*NA\\\\b|\\\\bMJ\\\\b|\\\\bMARI|marijuan|\\\\bMARJ|\\\\bMARIJ\\\\b|\\\\bTHC\\\\b|\\\\bHASHISH\\\\b\", ignore_case = T)\n    ),\n    # other = str_detect(\n    #   count_as_disposed,\n    #   \"(?i)OXY|HUFF|AMPHET|ZOLOL|ZOLAM|HYDROC|CODEIN|PRECURS|XANAX|MORPH|METERDI|ZEPAM|LORAZ|VALIU|EPHED|COCA|PSEUDO|\\\\bPRESCRIP|\\\\bNARC|\\\\bMETH|HEROIN|ANHYD|AMMONIA|OPIUM|LORTAB|\\\\bPARAPH\\\\b|\\\\bOTHER\\\\b\"\n    # )\n  )\n\nparties_sum <- parties_clean |>\n  group_by(oscn_id) |>\n  summarize(\n    n = n(),\n    n_capped = if_else(n >= 4, \"4+\", as.character(n)),\n    list_charges = paste0(count_as_disposed, collapse = \"; \")\n  ) |>\n  ungroup()\n\nparties_sum |>\n  filter(n >= 2) |>\n  ggplot(aes(\n    x = n_capped\n  )) +\n  scale_y_continuous(labels = scales::comma) +\n  stat_count() +\n  geom_text(aes(label = format(after_stat(count), big.mark = \",\")), stat = \"count\", vjust = -0.2) +\n  labs(title = \"Simple possession charges per defendant\",\n       subtitle = \"All CF / CM simple possession charges\\nfiled 2001-2022\",\n       x = \"N simple possession charges in data\",\n       y = \"Total defendants\",\n       caption = \"This data is based on the total number\\nof charges in our dataset, not cases\")\n\n```\n\nNext, we repeat this same analysis excluding descriptions mentioning marijuana, as HB 2153 provides an exception for these charges.\n\n```{r}\nparties_sum_no_marijuana <- parties_clean |>\n  filter(!marijuana) |>\n  group_by(oscn_id) |>\n  summarize(\n    n = n(),\n    n_capped = if_else(n >= 4, \"4+\", as.character(n)),\n    list_charges = paste0(count_as_disposed, collapse = \"; \")\n  ) |>\n  ungroup()\n\nparties_sum_no_marijuana |>\n  filter(n >= 2) |>\n  ggplot(aes(\n    x = n_capped, \n  )) +\n  scale_y_continuous(labels = scales::comma) +\n  stat_count() +\n  geom_text(aes(label = format(after_stat(count), big.mark = \",\")), stat = \"count\", vjust = -0.2) +\n  labs(title = \"Non-marijuana simple possession charges\\nper defendant\",\n       subtitle = \"Non-marijuana CF / CM simple possession charges\\nfiled 2001-2022\",\n       x = \"N non-marijuana possession charges in data\",\n       y = \"Total defendants\",\n       caption = \"This data is based on the total number\\nof charges in our dataset, not cases\")\n```\n\n```{r}\npoi <- parties_clean |>\n  filter(!marijuana) |>\n  arrange(oscn_id, disposition_date) |>\n  group_by(oscn_id) |>\n  nest() |>\n  mutate(\n    rolling_10_year_4_filings = map_lgl(\n      data,\n      ~ {\n        date_sequence <- .x$date_filed\n        any(sapply(date_sequence, function(d) {\n          sum(between(date_sequence, d, d + years(10))) >= 4\n        }))\n      }\n    )\n  ) |>\n  filter(rolling_10_year_4_filings) |>\n  unnest(cols = data) |>\n  ungroup()\n```\n\n```{r}\nn_oscn_poi <- poi |>\n  distinct(oscn_id) |>\n  count() |>\n  pull()\n\nn_total_poi <- n_oscn_poi * (n_total_cases / n_oscn_cases)\n```\n\nFinally, HB 2153 stipulates that the felony charge only comes into effect on the fourth or higher simple possession **conviction** within a **ten year time-span**. We therefore limit our count of charges to only those within a rolling 10 year window, arriving at our final result for OSCN counties. Applying the multiplier derived above, we then find an estimate for the number of individuals who, since 2001, have been convicted with simple drug possession four or more times. \n\n```{r}\ntibble(\n  OSCN = n_oscn_poi,\n  Statewide = floor(n_total_poi) \n) |>\n  gt() |>\n  gt::fmt_number(\n    decimals = 0\n  ) |>\n  gt::tab_footnote(\n    footnote = \"Estimated using the disposition rate of OSCN county cases\",\n    locations = cells_column_labels(\n      columns = Statewide\n    )\n  )\n```\n\n"},"formats":{"ojo-report-template-html":{"identifier":{"display-name":"HTML","target-format":"ojo-report-template-html","base-format":"html","extension-name":"ojo-report-template"},"execute":{"fig-width":7,"fig-height":5,"fig-format":"retina","fig-dpi":96,"df-print":"default","error":false,"eval":true,"cache":null,"freeze":"auto","echo":true,"output":true,"warning":true,"include":true,"keep-md":false,"keep-ipynb":false,"ipynb":null,"enabled":null,"daemon":null,"daemon-restart":false,"debug":false,"ipynb-filters":[],"engine":"knitr"},"render":{"keep-tex":false,"keep-source":false,"keep-hidden":false,"prefer-html":false,"output-divs":true,"output-ext":"html","fig-align":"default","fig-pos":null,"fig-env":null,"code-fold":"none","code-overflow":"scroll","code-link":false,"code-line-numbers":false,"code-tools":false,"tbl-colwidths":"auto","merge-includes":true,"inline-includes":false,"preserve-yaml":false,"latex-auto-mk":true,"latex-auto-install":true,"latex-clean":true,"latex-max-runs":10,"latex-makeindex":"makeindex","latex-makeindex-opts":[],"latex-tlmgr-opts":[],"latex-input-paths":[],"latex-output-dir":null,"link-external-icon":false,"link-external-newwindow":false,"self-contained-math":false,"format-resources":[],"notebook-links":true,"format-links":true,"shortcodes":[]},"pandoc":{"standalone":true,"wrap":"none","default-image-extension":"png","to":"html","embed-resources":true,"toc":true,"filters":[],"number-sections":true,"output-file":"hb2153.html"},"language":{"toc-title-document":"Table of contents","toc-title-website":"On this page","related-formats-title":"Other Formats","related-notebooks-title":"Notebooks","source-notebooks-prefix":"Source","section-title-abstract":"Abstract","section-title-appendices":"Appendices","section-title-footnotes":"Footnotes","section-title-references":"References","section-title-reuse":"Reuse","section-title-copyright":"Copyright","section-title-citation":"Citation","appendix-attribution-cite-as":"For attribution, please cite this work as:","appendix-attribution-bibtex":"BibTeX citation:","title-block-author-single":"Author","title-block-author-plural":"Authors","title-block-affiliation-single":"Affiliation","title-block-affiliation-plural":"Affiliations","title-block-published":"Published","title-block-modified":"Modified","callout-tip-title":"Tip","callout-note-title":"Note","callout-warning-title":"Warning","callout-important-title":"Important","callout-caution-title":"Caution","code-summary":"Code","code-tools-menu-caption":"Code","code-tools-show-all-code":"Show All Code","code-tools-hide-all-code":"Hide All Code","code-tools-view-source":"View Source","code-tools-source-code":"Source Code","code-line":"Line","code-lines":"Lines","copy-button-tooltip":"Copy to Clipboard","copy-button-tooltip-success":"Copied!","repo-action-links-edit":"Edit this page","repo-action-links-source":"View source","repo-action-links-issue":"Report an issue","back-to-top":"Back to top","search-no-results-text":"No results","search-matching-documents-text":"matching documents","search-copy-link-title":"Copy link to search","search-hide-matches-text":"Hide additional matches","search-more-match-text":"more match in this document","search-more-matches-text":"more matches in this document","search-clear-button-title":"Clear","search-detached-cancel-button-title":"Cancel","search-submit-button-title":"Submit","search-label":"Search","toggle-section":"Toggle section","toggle-sidebar":"Toggle sidebar navigation","toggle-dark-mode":"Toggle dark mode","toggle-reader-mode":"Toggle reader mode","toggle-navigation":"Toggle navigation","crossref-fig-title":"Figure","crossref-tbl-title":"Table","crossref-lst-title":"Listing","crossref-thm-title":"Theorem","crossref-lem-title":"Lemma","crossref-cor-title":"Corollary","crossref-prp-title":"Proposition","crossref-cnj-title":"Conjecture","crossref-def-title":"Definition","crossref-exm-title":"Example","crossref-exr-title":"Exercise","crossref-ch-prefix":"Chapter","crossref-apx-prefix":"Appendix","crossref-sec-prefix":"Section","crossref-eq-prefix":"Equation","crossref-lof-title":"List of Figures","crossref-lot-title":"List of Tables","crossref-lol-title":"List of Listings","environment-proof-title":"Proof","environment-remark-title":"Remark","environment-solution-title":"Solution","listing-page-order-by":"Order By","listing-page-order-by-default":"Default","listing-page-order-by-date-asc":"Oldest","listing-page-order-by-date-desc":"Newest","listing-page-order-by-number-desc":"High to Low","listing-page-order-by-number-asc":"Low to High","listing-page-field-date":"Date","listing-page-field-title":"Title","listing-page-field-description":"Description","listing-page-field-author":"Author","listing-page-field-filename":"File Name","listing-page-field-filemodified":"Modified","listing-page-field-subtitle":"Subtitle","listing-page-field-readingtime":"Reading Time","listing-page-field-categories":"Categories","listing-page-minutes-compact":"{0} min","listing-page-category-all":"All","listing-page-no-matches":"No matching items"},"metadata":{"lang":"en","fig-responsive":true,"quarto-version":"1.3.433","template-partials":["_extensions/openjusticeok/ojo-report-template/title-block.html"],"theme":["yeti","_extensions/openjusticeok/ojo-report-template/custom.scss"],"revealjs-plugins":[],"title":"HB 2153 Analysis","subtitle":"Open Justice Oklahoma","author":"Brancen Gregory","date":"last-modified","logo":"www/ojo-logo-white.png","smooth-scroll":true,"title-block-banner":"black","title-block-banner-color":"white","knitr":{"opts_chunk":{"fig.align":"center","echo":false,"message":false,"warning":false}},"description":"Estimating the number of Oklahomans with four or more simple possession convictions, 2001 through 2022. Analysis conducted at the request of [Oklahomans for Criminal Justice Reform (OCJR)](https://okjusticereform.org/) and [ProsperOK](https://www.prosperok.org/).\n","abstract":"We estimate that at least 2,945 Oklahomans have received 4 for more convictions for drug possession since 2001. This estimate is likely to underestimate the actual number of individuals in these circumstances due to the lack of data pre-2001 and other data availibility issues described below.\n"},"extensions":{"book":{"multiFile":true}}},"pdf":{"identifier":{"display-name":"PDF","target-format":"pdf","base-format":"pdf"},"execute":{"fig-width":5.5,"fig-height":3.5,"fig-format":"pdf","fig-dpi":300,"df-print":"default","error":false,"eval":true,"cache":null,"freeze":"auto","echo":true,"output":true,"warning":true,"include":true,"keep-md":false,"keep-ipynb":false,"ipynb":null,"enabled":null,"daemon":null,"daemon-restart":false,"debug":false,"ipynb-filters":[],"engine":"knitr"},"render":{"keep-tex":false,"keep-source":false,"keep-hidden":false,"prefer-html":false,"output-divs":true,"output-ext":"pdf","fig-align":"default","fig-pos":null,"fig-env":null,"code-fold":"none","code-overflow":"scroll","code-link":false,"code-line-numbers":false,"code-tools":false,"tbl-colwidths":true,"merge-includes":true,"inline-includes":false,"preserve-yaml":false,"latex-auto-mk":true,"latex-auto-install":true,"latex-clean":true,"latex-max-runs":10,"latex-makeindex":"makeindex","latex-makeindex-opts":[],"latex-tlmgr-opts":[],"latex-input-paths":[],"latex-output-dir":null,"link-external-icon":false,"link-external-newwindow":false,"self-contained-math":false,"format-resources":[]},"pandoc":{"pdf-engine":"xelatex","standalone":true,"variables":{"graphics":true,"tables":true},"default-image-extension":"pdf","to":"pdf","number-sections":true,"output-file":"hb2153.pdf"},"language":{"toc-title-document":"Table of contents","toc-title-website":"On this page","related-formats-title":"Other Formats","related-notebooks-title":"Notebooks","source-notebooks-prefix":"Source","section-title-abstract":"Abstract","section-title-appendices":"Appendices","section-title-footnotes":"Footnotes","section-title-references":"References","section-title-reuse":"Reuse","section-title-copyright":"Copyright","section-title-citation":"Citation","appendix-attribution-cite-as":"For attribution, please cite this work as:","appendix-attribution-bibtex":"BibTeX citation:","title-block-author-single":"Author","title-block-author-plural":"Authors","title-block-affiliation-single":"Affiliation","title-block-affiliation-plural":"Affiliations","title-block-published":"Published","title-block-modified":"Modified","callout-tip-title":"Tip","callout-note-title":"Note","callout-warning-title":"Warning","callout-important-title":"Important","callout-caution-title":"Caution","code-summary":"Code","code-tools-menu-caption":"Code","code-tools-show-all-code":"Show All Code","code-tools-hide-all-code":"Hide All Code","code-tools-view-source":"View Source","code-tools-source-code":"Source Code","code-line":"Line","code-lines":"Lines","copy-button-tooltip":"Copy to Clipboard","copy-button-tooltip-success":"Copied!","repo-action-links-edit":"Edit this page","repo-action-links-source":"View source","repo-action-links-issue":"Report an issue","back-to-top":"Back to top","search-no-results-text":"No results","search-matching-documents-text":"matching documents","search-copy-link-title":"Copy link to search","search-hide-matches-text":"Hide additional matches","search-more-match-text":"more match in this document","search-more-matches-text":"more matches in this document","search-clear-button-title":"Clear","search-detached-cancel-button-title":"Cancel","search-submit-button-title":"Submit","search-label":"Search","toggle-section":"Toggle section","toggle-sidebar":"Toggle sidebar navigation","toggle-dark-mode":"Toggle dark mode","toggle-reader-mode":"Toggle reader mode","toggle-navigation":"Toggle navigation","crossref-fig-title":"Figure","crossref-tbl-title":"Table","crossref-lst-title":"Listing","crossref-thm-title":"Theorem","crossref-lem-title":"Lemma","crossref-cor-title":"Corollary","crossref-prp-title":"Proposition","crossref-cnj-title":"Conjecture","crossref-def-title":"Definition","crossref-exm-title":"Example","crossref-exr-title":"Exercise","crossref-ch-prefix":"Chapter","crossref-apx-prefix":"Appendix","crossref-sec-prefix":"Section","crossref-eq-prefix":"Equation","crossref-lof-title":"List of Figures","crossref-lot-title":"List of Tables","crossref-lol-title":"List of Listings","environment-proof-title":"Proof","environment-remark-title":"Remark","environment-solution-title":"Solution","listing-page-order-by":"Order By","listing-page-order-by-default":"Default","listing-page-order-by-date-asc":"Oldest","listing-page-order-by-date-desc":"Newest","listing-page-order-by-number-desc":"High to Low","listing-page-order-by-number-asc":"Low to High","listing-page-field-date":"Date","listing-page-field-title":"Title","listing-page-field-description":"Description","listing-page-field-author":"Author","listing-page-field-filename":"File Name","listing-page-field-filemodified":"Modified","listing-page-field-subtitle":"Subtitle","listing-page-field-readingtime":"Reading Time","listing-page-field-categories":"Categories","listing-page-minutes-compact":"{0} min","listing-page-category-all":"All","listing-page-no-matches":"No matching items"},"metadata":{"block-headings":true,"title":"HB 2153 Analysis","subtitle":"Open Justice Oklahoma","author":"Brancen Gregory","date":"last-modified","logo":"www/ojo-logo-white.png","smooth-scroll":true,"title-block-banner":"black","title-block-banner-color":"white","knitr":{"opts_chunk":{"fig.align":"center","echo":false,"message":false,"warning":false}},"description":"Estimating the number of Oklahomans with four or more simple possession convictions, 2001 through 2022. Analysis conducted at the request of [Oklahomans for Criminal Justice Reform (OCJR)](https://okjusticereform.org/) and [ProsperOK](https://www.prosperok.org/).\n","abstract":"We estimate that at least 2,945 Oklahomans have received 4 for more convictions for drug possession since 2001. This estimate is likely to underestimate the actual number of individuals in these circumstances due to the lack of data pre-2001 and other data availibility issues described below.\n"},"extensions":{"book":{"selfContainedOutput":true}}}},"projectFormats":["html"]}